window.Flourish={external:true};window.FlourishConfig={public_url:"https://public.flourish.rocks/"},function(){"use strict";var e,N;function q(){if(null==e){var t=function(){var t=window.location;"about:srcdoc"==t.href&&(t=window.parent.location);var r={};return function(t,e,i){for(;i=e.exec(t);)r[decodeURIComponent(i[1])]=decodeURIComponent(i[2])}(t.search.substring(1).replace(/\+/g,"%20"),/([^&=]+)=?([^&]*)/g),r}();e="referrer"in t?/^https:\/\/medium.com\//.test(t.referrer):!("auto"in t)}return e}function z(t){var e=t||window.innerWidth;return 999<e?650:599<e?575:400}function _(t,e){if(window.top!==window.self){var i=window;if("srcdoc"==i.location.pathname&&(i=i.parent),N)return t=parseInt(t,10),void i.parent.postMessage({sentinel:"amp",type:"embed-size",height:t},"*");var r={sender:"Flourish",context:"iframe.resize",method:"resize",height:t,src:i.location.toString()};if(e)for(var o in e)r[o]=e[o];i.parent.postMessage(JSON.stringify(r),"*")}}function H(){return(-1!==navigator.userAgent.indexOf("Safari")||-1!==navigator.userAgent.indexOf("iPhone"))&&-1==navigator.userAgent.indexOf("Chrome")}function W(o){window.addEventListener("message",function(e){if(null!=e.source&&(e.origin===document.location.origin||e.origin.match(/\/\/localhost:\d+$|\.flourish\.(?:local(:\d+)?|rocks|studio)$/))){var t;try{t=JSON.parse(e.data)}catch(t){return void console.warn("Unexpected non-JSON message: "+JSON.stringify(e.data))}if("Flourish"===t.sender){for(var i=document.querySelectorAll("iframe"),r=0;r<i.length;r++)if(i[r].contentWindow==e.source||i[r].contentWindow==e.source.parent)return void o(t,i[r]);console.warn("could not find frame",t)}}}),H()&&(window.addEventListener("resize",t),t())}function t(){for(var t=document.querySelectorAll(".flourish-embed"),e=0;e<t.length;e++){var i=t[e];if(!i.getAttribute("data-width")){var r=i.querySelector("iframe"),o=window.getComputedStyle(i),n=i.offsetWidth-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight);r.style.width=n+"px"}}}var I={de:{credits:{default:"Erstellt mit Flourish"}},en:{credits:{default:"A Flourish data visualisation",chart:"A Flourish chart",map:"A Flourish map",survey:{text:"A Flourish survey visualisation",url:"https://flourish.studio/visualisations/survey-data/"},network:{text:"A Flourish network chart",url:"https://flourish.studio/visualisations/network-charts/"},scatter:"A Flourish scatter chart",sankey:"A Flourish sankey chart",quiz:"A Flourish quiz"}},es:{credits:{default:"Creado con Flourish"}},fr:{credits:{default:"Créé avec Flourish"}},it:{credits:{default:"Creato con Flourish"}},mi:{credits:{default:"Hangaia ki te Flourish"}},nl:{credits:{default:"Gemaakt met Flourish"}}};!function(){function t(){if(!window.FlourishLoaded){window.FlourishLoaded=!0;var t=window.Flourish&&window.Flourish.external,e="en",i=document.querySelector("meta[name='language'],meta[name='LANGUAGE']");i&&i.hasAttribute("content")&&(e=i.getAttribute("content").substr(0,2),I[e]||(e="en"));var r,o=Array.prototype.slice.call(document.querySelectorAll(".flourish-embed"));if(!t)for(var n=document.querySelectorAll("script"),a=0;a<n.length;a++){var s=n[a];if(s.src&&s.src.match(/(?:\.flourish\.(?:rocks|studio)|(?:localhost|flourish\.local)(?::\d+)?)\//g)&&s.src.match(/\/embed\.js$/)){if(!r){var d=s.getAttribute("src");r=d.substr(0,d.lastIndexOf("/resources"))+"/"}if(s.getAttribute("data-src")){var l=document.createElement("div");l.setAttribute("class","flourish-embed"),l.setAttribute("data-src",s.getAttribute("data-src")),s.getAttribute("data-height")&&l.setAttribute("data-height",s.getAttribute("data-height")),s.getAttribute("data-width")&&l.setAttribute("data-width",s.getAttribute("data-width")),s.parentNode.insertBefore(l,s),o.push(l)}}}if(o.length){var u=(N="#amp=1"==window.location.hash,{isFixedHeight:q,getHeightForBreakpoint:z,startEventListeners:W,notifyParentWindow:_,isSafari:H});for(a=0;a<o.length;a++){var c,h,m,f,p=o[a],g=p.getAttribute("data-src");if(g){var b=g.split("?"),w=1<b.length;g=b[0],m=t?(c=g,h=window.FlourishConfig.public_url,"?utm_source=embed&utm_campaign="+g):(f=0===g.indexOf("template/"),c=r+g+(f?"/preview":"/embed"),h=r+g+"/","?utm_source=showcase&utm_campaign="+g);var v=p.getAttribute("data-width"),A=p.getAttribute("data-height");!!A||(c+="?auto=1",A=u.getHeightForBreakpoint(v)+"px");var y=document.createElement("iframe");if(y.setAttribute("scrolling","no"),y.setAttribute("frameborder","0"),y.setAttribute("src",c),p.appendChild(y),v?y.style.width=v:u.isSafari()?y.style.width=p.offsetWidth+"px":y.style.width="100%",A&&("%"===A.charAt(A.length-1)&&(A=parseFloat(A)/100*p.parentNode.offsetHeight+"px"),y.style.height=A),!f&&!w){for(var x,F="",k=p.className.split(" "),C=0;C<k.length;C++)if("flourish-embed"!=k[C]&&0==k[C].indexOf("flourish-")){F=k[C].substr(9);break}F||(F=0==g.indexOf("story")?"story":"default"),"object"==typeof(x=I[e].credits[F]||I.en.credits[F]||I.en.credits.default)&&(x.url&&(h=x.url),x=x.text);var S=document.createElement("div");S.setAttribute("class","flourish-credit"),S.setAttribute("style","width:100%!important;margin:0 0 4px!important;text-align:right!important;font-family:Helvetica,sans-serif!important;color:#888!important;font-size:11px!important;font-weight:bold!important;font-style:normal!important;-webkit-font-smoothing:antialiased!important;box-shadow:none!important;");var E=document.createElement("a");E.setAttribute("href",h+m),E.setAttribute("target","_top"),E.setAttribute("style","display:inline-block!important;text-decoration:none!important;font:inherit!important;color:inherit!important;border:none!important;margin:0 5px!important;box-shadow:none!important;"),S.appendChild(E);var O=document.createElement("img");O.setAttribute("alt","Flourish logo"),O.setAttribute("src",window.FlourishConfig.public_url+"resources/bosh.svg"),O.setAttribute("style","font:inherit!important;width:auto!important;height:12px!important;border:none!important;margin:0 2px 0!important;vertical-align:middle!important;display:inline-block!important;box-shadow:none!important;"),E.appendChild(O);var L=document.createElement("span");L.setAttribute("style","font:inherit!important;color:#888!important;vertical-align:middle!important;display:inline-block!important;box-shadow:none!important;"),L.appendChild(document.createTextNode(x)),E.appendChild(L),p.appendChild(S)}}}u.startEventListeners(function(t,e){"resize"==t.method&&("number"==typeof t.height&&(t.height+="px"),t.height&&(e.style.height=t.height))})}else console.warn("Flourish: could not find anything to embed")}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t()}()}();
//# sourceMappingURL=embed.js.map
